"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["161"],{8403:function(e,t,l){l.r(t),l.d(t,{default:()=>et});var a=l(9454),n=l(2403),i=l(6419),d=l(209),r=l(3447),u=l(9506),o=l(5702),s=l(3312),m=l(6949),c=l(55);let p={class:"bt-tips flex flex-col gap-4px list-outside list-disc leading-20px text-[#777]"};var _=l(4222);let v=(0,_.default)({},[["render",function(e,t){return(0,d.wg)(),(0,d.iD)("ul",p,[(0,d.WI)(e.$slots,"default",{},void 0,!0)])}],["__scopeId","data-v-8731a1b4"]]);var f=l(5523),w=l(5891),S=l(4603),U=l(6883),x=l(6988);let k={class:"pt-20px"},y={class:"w-320px"},h={class:"w-100px ml-20px"},W=(0,d.aZ)({__name:"DomainForm",setup(e){let t=(0,d.iH)(!1),l=(0,d.Fl)(()=>t.value?"编辑域名":"添加域名"),a=(0,d.AE)("formRef"),n=(0,d.qj)({domain:"",a_record:"",quota:5,quota_unit:"GB",mailboxes:50,email:""}),i=[{label:"GB",value:"GB"},{label:"MB",value:"MB"}],r={domain:{trigger:["blur","input"],validator:()=>""!==n.domain.trim()||Error("邮箱域名不能为空!")}},u=(e,t)=>{switch(t){case"GB":return 0x40000000*e;case"MB":return 1048576*e;default:return e}},[m,p]=(0,s.d)({onChangeState:e=>{if(e){let e=p.getState();if(t.value=e.isEdit,e.row){let{row:t}=e;n.domain=t.domain,n.a_record=t.a_record;let l=(0,o.UO)(t.quota);n.quota=(0,o.Dx)(l.split(" ")[0]),n.quota_unit=l.split(" ")[1],n.mailboxes=t.mailboxes}}else n.domain="",n.a_record="",n.quota=5,n.quota_unit="GB",n.mailboxes=50},onConfirm:async()=>{var e;await (null===(e=a.value)||void 0===e?void 0:e.validate()),t.value?await (0,c.gK)({domain:n.domain,quota:u(n.quota,n.quota_unit),mailboxes:n.mailboxes}):await (0,c.Fj)({domain:n.domain,quota:u(n.quota,n.quota_unit),mailboxes:n.mailboxes}),p.getState().refresh()}});return(e,u)=>{let o=x.Z,s=U.ZP,c=S.Z,p=w.Z,_=f.Z;return(0,d.wg)(),(0,d.j4)((0,d.SU)(m),{title:(0,d.SU)(l),width:580},{default:(0,d.w5)(()=>[(0,d._)("div",k,[(0,d.Wm)(_,{ref_key:"formRef",ref:a,model:(0,d.SU)(n),rules:r},{default:(0,d.w5)(()=>[(0,d.Wm)(s,{label:"域名",path:"domain"},{default:(0,d.w5)(()=>[(0,d._)("div",y,[(0,d.Wm)(o,{value:(0,d.SU)(n).domain,"onUpdate:value":u[0]||(u[0]=e=>(0,d.SU)(n).domain=e),disabled:(0,d.SU)(t),placeholder:"请输入域名，例如：aapanel.com"},null,8,["value","disabled"])])]),_:1}),(0,d.kq)("",!0),(0,d.Wm)(s,{label:"域名配额"},{default:(0,d.w5)(()=>[(0,d.Wm)(c,{value:(0,d.SU)(n).quota,"onUpdate:value":u[2]||(u[2]=e=>(0,d.SU)(n).quota=e),class:"w-200px",min:0,"show-button":!1},null,8,["value"]),(0,d._)("div",h,[(0,d.Wm)(p,{value:(0,d.SU)(n).quota_unit,"onUpdate:value":u[3]||(u[3]=e=>(0,d.SU)(n).quota_unit=e),options:i},null,8,["value"])])]),_:1}),(0,d.Wm)(s,{label:"邮箱数量"},{default:(0,d.w5)(()=>[(0,d.Wm)(c,{value:(0,d.SU)(n).mailboxes,"onUpdate:value":u[4]||(u[4]=e=>(0,d.SU)(n).mailboxes=e),class:"w-320px",min:0,"show-button":!1},null,8,["value"])]),_:1}),(0,d.kq)("",!0)]),_:1},8,["model"]),(0,d.kq)("",!0)])]),_:1},8,["title"])}}}),b={class:"py-20px"},g={class:"w-290px"},Z=(0,d.aZ)({__name:"DomainCatch",setup(e){let t=(0,d.qj)({email:""}),[l]=(0,s.d)({onConfirm:async()=>{}});return(e,a)=>{let n=x.Z,i=U.ZP,r=f.Z;return(0,d.wg)(),(0,d.j4)((0,d.SU)(l),{title:"捕获邮件",width:540},{default:(0,d.w5)(()=>[(0,d._)("div",b,[(0,d.Wm)(r,{model:(0,d.SU)(t)},{default:(0,d.w5)(()=>[(0,d.Wm)(i,{label:"转发邮件","show-feedback":!1},{default:(0,d.w5)(()=>[(0,d._)("div",g,[(0,d.Wm)(n,{value:(0,d.SU)(t).email,"onUpdate:value":a[0]||(a[0]=e=>(0,d.SU)(t).email=e),placeholder:"捕获不存在的邮件，转发至此邮件"},null,8,["value"])])]),_:1})]),_:1},8,["model"])])]),_:1})}}});var q=l(4671);let C=(0,d.aZ)({__name:"index",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){let t=(0,d.tT)(e,"value");return(e,l)=>{let a=q.Z;return(0,d.wg)(),(0,d.j4)(a,{value:t.value,"onUpdate:value":l[0]||(l[0]=e=>t.value=e),class:"bt-tabs h-full",type:"card",placement:"top"},{default:(0,d.w5)(()=>[(0,d.WI)(e.$slots,"default")]),_:3},8,["value"])}}}),P=(0,_.default)(C,[["__scopeId","data-v-aa8a5942"]]);var T=l(6720),z=l(4352),D=l(3236);let M={class:"ssl-cert-container"},j={class:"brand-info"},R={class:"info-value"},E={class:"info-value font-normal!"},F={class:"cert-content"},X={class:"cert-section"},H={class:"cert-section"},I={class:"cert-actions"},B=(0,d.aZ)({__name:"OtherCert",props:{domain:{type:Object,required:!0},refresh:{type:Function,required:!0}},setup(e){let t=(0,d.iH)({subject:"",issuer:"",not_before:"",not_after:"",dns:[],endtime:0,key_pem:"",cert_pem:""}),l=(0,d.Fl)(()=>t.value.dns||[]),a=async()=>{let l=await (0,c.Au)({domain:e.domain.domain});(0,o.Kn)(l)&&(t.value=l)},n=async()=>{await (0,c.OV)({domain:e.domain.domain,key:t.value.key_pem,certificate:t.value.cert_pem}),a(),e.refresh()},i=async()=>{await (0,c.yW)({domain:e.domain.domain}),a(),e.refresh()};return t.value=e.domain.cert_info,(e,a)=>{let u=D.ZP,o=z.Z,s=x.Z,m=r.ZP;return(0,d.wg)(),(0,d.iD)("div",M,[(0,d.SU)(t).endtime>0?((0,d.wg)(),(0,d.j4)(o,{key:0,class:"mb-16px",type:"success","show-icon":!1},{default:(0,d.w5)(()=>[(0,d._)("div",j,[a[2]||(a[2]=(0,d._)("div",{class:"info-label"},"品牌：",-1)),(0,d._)("div",R,(0,d.zw)((0,d.SU)(t).issuer),1),a[3]||(a[3]=(0,d._)("div",{class:"info-label"},"证书域名：",-1)),(0,d._)("div",E,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)((0,d.SU)(l),(e,t)=>((0,d.wg)(),(0,d.j4)(u,{key:t,size:"small"},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e),1)]),_:2},1024))),128))])])]),_:1})):(0,d.kq)("",!0),(0,d._)("div",F,[(0,d._)("div",X,[a[4]||(a[4]=(0,d._)("div",{class:"section-title"},"私钥 (KEY)",-1)),(0,d.Wm)(s,{value:(0,d.SU)(t).key_pem,"onUpdate:value":a[0]||(a[0]=e=>(0,d.SU)(t).key_pem=e),type:"textarea",placeholder:"",rows:14,"input-props":{spellcheck:!1}},null,8,["value"])]),(0,d._)("div",H,[a[5]||(a[5]=(0,d._)("div",{class:"section-title"},"证书 (CRT/PEM)",-1)),(0,d.Wm)(s,{value:(0,d.SU)(t).cert_pem,"onUpdate:value":a[1]||(a[1]=e=>(0,d.SU)(t).cert_pem=e),type:"textarea",placeholder:"","input-props":{spellcheck:!1},rows:14},null,8,["value"])])]),(0,d._)("div",I,[(0,d.Wm)(m,{type:"primary",onClick:n},{default:(0,d.w5)(()=>a[6]||(a[6]=[(0,d.Uk)("保存")])),_:1}),(0,d.Wm)(m,{type:"primary",onClick:i},{default:(0,d.w5)(()=>a[7]||(a[7]=[(0,d.Uk)("申请免费证书")])),_:1})]),(0,d.Wm)(v,null,{default:(0,d.w5)(()=>a[8]||(a[8]=[(0,d._)("li",null,"粘贴您的 KEY 和 CRT 内容，然后保存",-1),(0,d._)("li",null,"如果浏览器提示证书链不完整，请检查 PEM 证书是否正确拼接",-1),(0,d._)("li",null,"PEM 格式证书 = 域名证书 .crt + 根证书 (root_bundle).crt",-1),(0,d._)("li",null,"当未指定 SSL 默认站点时，未配置 SSL 的站点将使用 HTTPS 访问启用了 SSL 的站点",-1)])),_:1})])}}}),O=(0,_.default)(B,[["__scopeId","data-v-78af732e"]]),K=(0,d.aZ)({__name:"index",setup(e){let t=(0,d.iH)("other"),l=(0,d.iH)(null),[a,n]=(0,s.d)({onChangeState:e=>{if(e){let{row:e}=n.getState();e&&(l.value=e)}}}),i=()=>{n.getState().refresh()};return(e,n)=>{let r=T.Z;return(0,d.wg)(),(0,d.j4)((0,d.SU)(a),{title:"Domain SSL",width:650,footer:!1},{default:(0,d.w5)(()=>[(0,d.Wm)(P,{value:(0,d.SU)(t),"onUpdate:value":n[0]||(n[0]=e=>(0,d.dq)(t)?t.value=e:null)},{default:(0,d.w5)(()=>[(0,d.Wm)(r,{name:"other",tab:"Other certificate"},{default:(0,d.w5)(()=>[(0,d.SU)(l)?((0,d.wg)(),(0,d.j4)(O,{key:0,domain:(0,d.SU)(l),refresh:i},null,8,["domain"])):(0,d.kq)("",!0)]),_:1})]),_:1},8,["value"])]),_:1})}}});var G=l(5476),L=l(5191),A=l(5962),N=l(6499),$=l(6775);let Y={class:"pt-20px"},V=(0,d.aZ)({__name:"DomainDns",setup(e){let t=(0,d.iH)([]),l=e=>t.value.length>0?t.value[0].dns_records[e].value:"",a=(0,d.Fl)(()=>l("dkim")),n=(0,d.Fl)(()=>l("mx")),u=(0,d.Fl)(()=>l("dmarc")),m=(0,d.Fl)(()=>"v=spf1 +a +mx  -all"),c=e=>{let{status:t}=e;return(0,d.Wm)("div",{class:["inline-flex items-center",t?"text-primary":"text-error"]},[(0,d.Wm)(A.g,{size:"16"},{default:()=>[t?(0,d.Wm)(N.Z,null,null):(0,d.Wm)($.Z,null,null)]}),(0,d.Wm)("span",{class:"ml-4px"},[t?"OK":"Not Set"])])},p=(0,d.iH)([{key:"domain",title:"域名",width:"20%",ellipsis:{tooltip:!0}},{key:"mx",title:"MX",render:e=>{let t=e.dns_records.mx;return(0,d.Wm)(c,{status:(null==t?void 0:t.valid)||!1},null)}},{key:"a",title:"A record",render:e=>{let t=e.dns_records.a;return(0,d.Wm)(c,{status:(null==t?void 0:t.valid)||!1},null)}},{key:"spf",title:"SPF",render:e=>{let t=e.dns_records.spf;return(0,d.Wm)(c,{status:(null==t?void 0:t.valid)||!1},null)}},{key:"dkim",title:"DKIM",render:e=>{let t=e.dns_records.dkim;return(0,d.Wm)(c,{status:(null==t?void 0:t.valid)||!1},null)}},{key:"dmarc",title:"DMARC",render:e=>{let t=e.dns_records.dmarc;return(0,d.Wm)(c,{status:(null==t?void 0:t.valid)||!1},null)}},{key:"ptr",title:"PTR",render:e=>{let t=e.dns_records.ptr;return(0,d.Wm)(c,{status:(null==t?void 0:t.valid)||!1},null)}}]),[_,v]=(0,s.d)({onChangeState:e=>{if(e){let{row:e}=v.getState();e&&(t.value=[e])}}});return(e,l)=>{let s=i.Z,c=L.Z,v=G.ZP,f=r.ZP;return(0,d.wg)(),(0,d.j4)((0,d.SU)(_),{title:"DNS Record",width:750,footer:!1},{default:(0,d.w5)(()=>[(0,d._)("div",Y,[(0,d.Wm)(s,{class:"mb-20px",data:(0,d.SU)(t),columns:(0,d.SU)(p)},null,8,["data","columns"]),l[17]||(l[17]=(0,d._)("div",{class:"record-title"},"步骤1：添加MX记录",-1)),l[18]||(l[18]=(0,d._)("div",{class:"record-desc"}," 登录到域名服务提供商，添加记录类型为MX的记录用于邮箱服务（请直接复制以下参数） ",-1)),(0,d.Wm)(c,{class:"mb-30px"},{default:(0,d.w5)(()=>[l[6]||(l[6]=(0,d._)("thead",null,[(0,d._)("tr",null,[(0,d._)("th",null,"记录类型"),(0,d._)("th",null,"主机记录"),(0,d._)("th",null,"记录值"),(0,d._)("th",null,"MX优先级")])],-1)),(0,d._)("tbody",null,[(0,d._)("tr",null,[l[3]||(l[3]=(0,d._)("td",null,"MX",-1)),l[4]||(l[4]=(0,d._)("td",null,"@",-1)),(0,d._)("td",null,(0,d.zw)((0,d.SU)(n)),1),l[5]||(l[5]=(0,d._)("td",null,"10",-1))])])]),_:1}),l[19]||(l[19]=(0,d._)("div",{class:"record-title"},"步骤2：添加TXT记录",-1)),l[20]||(l[20]=(0,d._)("div",{class:"record-desc"},"添加记录类型为TXT的记录用于邮箱反垃圾邮件（请直接复制以下参数）",-1)),(0,d.Wm)(c,{class:"mb-30px"},{default:(0,d.w5)(()=>[l[16]||(l[16]=(0,d._)("thead",null,[(0,d._)("tr",null,[(0,d._)("th",null,"记录类型"),(0,d._)("th",null,"主机记录"),(0,d._)("th",null,"记录值")])],-1)),(0,d._)("tbody",null,[(0,d._)("tr",null,[l[8]||(l[8]=(0,d._)("td",null,"TXT",-1)),l[9]||(l[9]=(0,d._)("td",null,"@",-1)),(0,d._)("td",null,[(0,d.Wm)(v,{class:"mr-4px max-w-360px!"},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)((0,d.SU)(m)),1)]),_:1}),(0,d.Wm)(f,{text:"",type:"primary",onClick:l[0]||(l[0]=e=>(0,d.SU)(o.zp)((0,d.SU)(m)))},{default:(0,d.w5)(()=>l[7]||(l[7]=[(0,d.Uk)("(Copy)")])),_:1})])]),(0,d._)("tr",null,[l[11]||(l[11]=(0,d._)("td",null,"TXT",-1)),l[12]||(l[12]=(0,d._)("td",null,"default._domainkey",-1)),(0,d._)("td",null,[(0,d.Wm)(v,{class:"mr-4px max-w-360px!"},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)((0,d.SU)(a)||"--"),1)]),_:1}),(0,d.SU)(a)?((0,d.wg)(),(0,d.j4)(f,{key:0,text:"",type:"primary",onClick:l[1]||(l[1]=e=>(0,d.SU)(o.zp)((0,d.SU)(a)))},{default:(0,d.w5)(()=>l[10]||(l[10]=[(0,d.Uk)(" (Copy) ")])),_:1})):(0,d.kq)("",!0)])]),(0,d._)("tr",null,[l[14]||(l[14]=(0,d._)("td",null,"TXT",-1)),l[15]||(l[15]=(0,d._)("td",null,"_dmarc",-1)),(0,d._)("td",null,[(0,d.Wm)(v,{class:"mr-4px max-w-360px!"},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)((0,d.SU)(u)),1)]),_:1}),(0,d.SU)(u)?((0,d.wg)(),(0,d.j4)(f,{key:0,text:"",type:"primary",onClick:l[2]||(l[2]=e=>(0,d.SU)(o.zp)((0,d.SU)(u)))},{default:(0,d.w5)(()=>l[13]||(l[13]=[(0,d.Uk)(" (Copy) ")])),_:1})):(0,d.kq)("",!0)])])])]),_:1}),l[21]||(l[21]=(0,d._)("div",{class:"record-title"},"步骤3：添加PTR记录",-1)),l[22]||(l[22]=(0,d._)("div",{class:"record-desc"},"（可选）PTR记录用于反向 DNS 查找",-1)),l[23]||(l[23]=(0,d._)("div",{class:"record-desc"},"联系您的IP提供商创建 PTR 记录",-1))])]),_:1})}}}),J=(0,_.default)(V,[["__scopeId","data-v-90e3ef18"]]),Q={class:"p-24px"},ee=(0,d.aZ)({__name:"index",setup(e){let{tableParams:t,tableList:l,loading:p,tableTotal:_,getTableData:v}=(0,m.Z)({immediate:!0,params:{page:1,page_size:10,keyword:""},fetchFn:c.i7}),f=(0,d.iH)([{key:"domain",title:"域名",minWidth:130,ellipsis:{tooltip:!0}},{title:"quota",key:"quota",render:e=>(0,o.UO)(e.quota)},{key:"mailboxes",title:"Mailboxes"},{key:"mailbox_quota",title:"Default mailbox size",render:e=>(0,o.UO)(e.mailbox_quota)},{key:"ssl",title:"SSL",render:e=>{if(e.cert_info&&e.cert_info.endtime){let t=Math.floor((1e3*e.cert_info.endtime-Date.now())/1e3/60/60/24);return(0,d.Wm)(r.ZP,{type:t<0?"error":"primary",text:!0,onClick:()=>{h(e)}},{default:()=>[t<0?"已过期":`${t}天`]})}return(0,d.Wm)(r.ZP,{type:"warning",text:!0,onClick:()=>{h(e)}},{default:()=>[(0,d.Uk)("未设置")]})}},{title:"操作",key:"actions",align:"right",render:e=>(0,d.Wm)(u.Z,{inline:!0},{default:()=>[(0,d.Wm)(r.ZP,{type:"primary",text:!0,onClick:()=>{q(e)}},{default:()=>[(0,d.Uk)("DNS记录")]}),(0,d.Wm)(r.ZP,{type:"primary",text:!0,onClick:()=>{C(e)}},{default:()=>[(0,d.Uk)("编辑")]}),(0,d.Wm)(r.ZP,{type:"error",text:!0,onClick:()=>{P(e)}},{default:()=>[(0,d.Uk)("删除")]})]})}]),[w,S]=(0,s.d)({component:W,state:{isEdit:!1,refresh:v}}),U=()=>{S.setState({row:null,isEdit:!1}),S.open()},[x]=(0,s.d)({component:Z}),[k,y]=(0,s.d)({component:K,state:{refresh:v}}),h=e=>{y.setState({row:e}),y.open()},[b,g]=(0,s.d)({component:J,state:{}}),q=e=>{g.setState({row:e}),g.open()},C=e=>{S.setState({row:e,isEdit:!0}),S.open()},P=e=>{(0,o.iG)({title:"删除域名",content:`确定要删除域名【${e.domain}】吗？`,confirmText:"删除",confirmType:"error",onConfirm:async()=>{await (0,c.dj)({domain:e.domain}),v()}})};return(e,u)=>{let o=i.Z,s=n.Z,m=a.Z;return(0,d.wg)(),(0,d.iD)("div",Q,[u[3]||(u[3]=(0,d._)("div",{class:"mb-20px text-24px font-bold"},"MailDomain",-1)),(0,d.Wm)(m,null,{toolsLeft:(0,d.w5)(()=>[(0,d.Wm)((0,d.SU)(r.ZP),{type:"primary",onClick:U},{default:(0,d.w5)(()=>u[2]||(u[2]=[(0,d.Uk)("添加域名")])),_:1})]),table:(0,d.w5)(()=>[(0,d.Wm)(o,{loading:(0,d.SU)(p),columns:(0,d.SU)(f),data:(0,d.SU)(l)},null,8,["loading","columns","data"])]),pageRight:(0,d.w5)(()=>[(0,d.Wm)(s,{page:(0,d.SU)(t).page,"onUpdate:page":u[0]||(u[0]=e=>(0,d.SU)(t).page=e),"page-size":(0,d.SU)(t).page_size,"onUpdate:pageSize":u[1]||(u[1]=e=>(0,d.SU)(t).page_size=e),"item-count":(0,d.SU)(_),onRefresh:(0,d.SU)(v)},null,8,["page","page-size","item-count","onRefresh"])]),modal:(0,d.w5)(()=>[(0,d.Wm)((0,d.SU)(w)),(0,d.Wm)((0,d.SU)(x)),(0,d.Wm)((0,d.SU)(k)),(0,d.Wm)((0,d.SU)(b))]),_:1})])}}}),et=(0,_.default)(ee,[["__scopeId","data-v-0a49638a"]])}}]);