"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["807"],{1555:function(e,t,a){a.d(t,{A8:()=>n,NI:()=>i,QB:()=>u,WF:()=>s,Xc:()=>d,ef:()=>m,ij:()=>o});var l=a(4203);function n(e){return l.e.get("/email_template/list",{params:e})}function i(){return l.e.get("/email_template/all")}function o(e){return l.e.get("/email_template/get",{params:e})}function s(e){return l.e.post("/email_template/create",e,{fetchOptions:{loading:"Creating template, please wait...",successMessage:!0}})}function u(e){return l.e.post("/email_template/update",e,{fetchOptions:{loading:"Updating template, please wait...",successMessage:!0}})}function m(e){return l.e.post("/email_template/copy",e,{fetchOptions:{loading:"Copying template, please wait...",successMessage:!0}})}function d(e){return l.e.post("/email_template/delete",e,{fetchOptions:{loading:"Deleting template, please wait...",successMessage:!0}})}},3104:function(e,t,a){a.d(t,{Z:()=>i});var l=a(209);let n=["height","srcdoc"],i=(0,l.aZ)({__name:"index",props:{value:{type:String,default:""},height:{type:[String,Number],default:"100%"}},setup:e=>(t,a)=>((0,l.wg)(),(0,l.iD)("iframe",{width:"100%",height:e.height,srcdoc:e.value,style:{border:"none"}},null,8,n))})},932:function(e,t,a){a.r(t),a.d(t,{default:()=>z});var l=a(3447),n=a(5523),i=a(6528),o=a(3104),s=a(8951),u=a(209),m=a(6768);let d=(0,u.aZ)({__name:"index",props:(0,u.Vf)({language:{type:String,default:"html"},theme:{type:String,default:"vs-dark"},options:{type:Object,default:()=>({})}},{value:{default:""},valueModifiers:{}}),emits:["update:value"],setup(e,t){let{expose:a}=t,l=(0,u.tT)(e,"value"),n=(0,u.iH)(null),i=null,o=(0,u.iH)(!1);m.Z.config({paths:{vs:`${location.origin}/static/plugin/monaco/min/vs`}});let d=async()=>{if(n.value&&!i)try{o.value=!0,(i=(await m.Z.init()).editor.create(n.value,{value:l.value,language:e.language,theme:e.theme,minimap:{enabled:!1},automaticLayout:!0,scrollBeyondLastLine:!1,fontSize:14,tabSize:2,wordWrap:"on",...e.options})).onDidChangeModelContent(()=>{let e=(null==i?void 0:i.getValue())||"";l.value=e})}finally{o.value=!1}},c=()=>{i&&(i.dispose(),i=null)};return(0,u.YP)(()=>l.value,e=>{i&&e!==i.getValue()&&i.setValue(e)}),(0,u.bv)(()=>{d()}),(0,u.Jd)(()=>{c()}),a({getEditor:()=>i}),(e,t)=>{let a=s.Z;return(0,u.wg)(),(0,u.j4)(a,{class:"h-full",show:(0,u.SU)(o)},{default:(0,u.w5)(()=>[(0,u._)("div",{ref_key:"containerRef",ref:n,class:"monaco-editor-container"},null,512)]),_:1},8,["show"])}}});var c=a(4222);let r=(0,c.default)(d,[["__scopeId","data-v-63445289"]]);var p=a(919),f=a(6883),v=a(8454),_=a(3012),g=a(6666),w=a(825),h=a(1555),k=a(5e3);let y={class:"template-edit"},b={class:"w-400px"},W={class:"editor-area"},Z={class:"mb-16px"},U={class:"flex-1 overflow-hidden"},S={class:"preview-title"},x={class:"flex-1 overflow-hidden"},C={class:"action-buttons"},$=(0,u.aZ)({__name:"edit",setup(e){let t=(0,k.yj)(),a=(0,u.iH)(`${t.params.id}`),s=(0,u.qj)({id:0,temp_name:"",content:""}),m=e=>{let t=new FileReader;t.onload=e=>{var t;s.content=null===(t=e.target)||void 0===t?void 0:t.result},e.file&&t.readAsText(e.file)},d=async()=>{await (0,h.QB)({id:s.id,temp_name:s.temp_name,content:s.content})},c=()=>{window.history.back()};return(async()=>{let e=await (0,h.ij)({id:a.value});(0,w.Kn)(e)&&(s.id=e.id,s.temp_name=e.temp_name,s.content=e.content)})(),(e,t)=>{let a=(0,u.up)("router-link"),w=g.Z,h=_.ZP,k=v.Z,$=f.ZP,z=p.Z,j=o.Z,M=i.ZP,D=n.Z,O=l.ZP;return(0,u.wg)(),(0,u.iD)("div",y,[(0,u.Wm)(h,{class:"mb-20px"},{default:(0,u.w5)(()=>[(0,u.Wm)(w,null,{default:(0,u.w5)(()=>[(0,u.Wm)(a,{to:"/market/template"},{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)(e.$t("market.template.title")),1)]),_:1})]),_:1}),(0,u.Wm)(w,null,{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)((0,u.SU)(s).temp_name),1)]),_:1})]),_:1}),(0,u.Wm)(D,{class:"template-form","label-placement":"top"},{default:(0,u.w5)(()=>[(0,u.Wm)($,{label:e.$t("market.template.name")},{default:(0,u.w5)(()=>[(0,u._)("div",b,[(0,u.Wm)(k,{value:(0,u.SU)(s).temp_name,"onUpdate:value":t[0]||(t[0]=e=>(0,u.SU)(s).temp_name=e)},null,8,["value"])])]),_:1},8,["label"]),(0,u.Wm)($,{class:"editor-form-item",label:e.$t("market.template.content"),"show-feedback":!1},{default:(0,u.w5)(()=>[(0,u._)("div",W,[(0,u._)("div",Z,[(0,u.Wm)(z,{mode:"button","is-upload":!1,accept:["html"],onChange:m},{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)(e.$t("market.template.uploadHtml")),1)]),_:1})]),(0,u._)("div",U,[(0,u.Wm)(r,{value:(0,u.SU)(s).content,"onUpdate:value":t[1]||(t[1]=e=>(0,u.SU)(s).content=e),language:"html"},null,8,["value"])])]),(0,u.Wm)(M,{class:"preview-area","content-style":{display:"flex",flexDirection:"column"}},{default:(0,u.w5)(()=>[(0,u._)("div",S,(0,u.zw)(e.$t("common.actions.preview")),1),(0,u._)("div",x,[(0,u.Wm)(j,{value:(0,u.SU)(s).content},null,8,["value"])])]),_:1})]),_:1},8,["label"])]),_:1}),(0,u._)("div",C,[(0,u.Wm)(O,{type:"primary",onClick:d},{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)(e.$t("common.actions.save")),1)]),_:1}),(0,u.Wm)(O,{class:"ml-16px",onClick:c},{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)(e.$t("common.actions.back")),1)]),_:1})])])}}}),z=(0,c.default)($,[["__scopeId","data-v-243d53e2"]])}}]);