"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["24"],{3499:function(e,l,t){t.r(l),t.d(l,{default:()=>el});var a=t(9454),n=t(2403),i=t(6419),d=t(209),r=t(3447),u=t(9506),o=t(5702),s=t(3312),m=t(6949),c=t(55);let p={class:"bt-tips flex flex-col gap-4px list-outside list-disc leading-20px text-[#777]"};var _=t(4222);let v=(0,_.default)({},[["render",function(e,l){return(0,d.wg)(),(0,d.iD)("ul",p,[(0,d.WI)(e.$slots,"default",{},void 0,!0)])}],["__scopeId","data-v-8731a1b4"]]);var f=t(5523),w=t(5891),S=t(4603),U=t(6883),x=t(6988);let k={class:"pt-20px"},y={class:"w-320px"},h={class:"w-100px ml-20px"},W=(0,d.aZ)({__name:"DomainForm",setup(e){let l=(0,d.iH)(!1),t=(0,d.Fl)(()=>l.value?"编辑域名":"添加域名"),a=(0,d.AE)("formRef"),n=(0,d.qj)({domain:"",a_record:"",quota:5,quota_unit:"GB",mailboxes:50,email:""}),i=[{label:"GB",value:"GB"},{label:"MB",value:"MB"}],r={domain:{trigger:["blur","input"],validator:()=>""!==n.domain.trim()||Error("邮箱域名不能为空!")}},u=(e,l)=>{switch(l){case"GB":return 0x40000000*e;case"MB":return 1048576*e;default:return e}},[m,p]=(0,s.d)({onChangeState:e=>{if(e){let e=p.getState();if(l.value=e.isEdit,e.row){let{row:l}=e;n.domain=l.domain,n.a_record=l.a_record;let t=(0,o.UO)(l.quota);n.quota=(0,o.Dx)(t.split(" ")[0]),n.quota_unit=t.split(" ")[1],n.mailboxes=l.mailboxes}}else n.domain="",n.a_record="",n.quota=5,n.quota_unit="GB",n.mailboxes=50},onConfirm:async()=>{var e;await (null===(e=a.value)||void 0===e?void 0:e.validate()),l.value?await (0,c.gK)({domain:n.domain,quota:u(n.quota,n.quota_unit),mailboxes:n.mailboxes}):await (0,c.Fj)({domain:n.domain,quota:u(n.quota,n.quota_unit),mailboxes:n.mailboxes}),p.getState().refresh()}});return(e,u)=>{let o=x.Z,s=U.ZP,c=S.Z,p=w.Z,_=f.Z;return(0,d.wg)(),(0,d.j4)((0,d.SU)(m),{title:(0,d.SU)(t),width:580},{default:(0,d.w5)(()=>[(0,d._)("div",k,[(0,d.Wm)(_,{ref_key:"formRef",ref:a,model:(0,d.SU)(n),rules:r},{default:(0,d.w5)(()=>[(0,d.Wm)(s,{label:"域名",path:"domain"},{default:(0,d.w5)(()=>[(0,d._)("div",y,[(0,d.Wm)(o,{value:(0,d.SU)(n).domain,"onUpdate:value":u[0]||(u[0]=e=>(0,d.SU)(n).domain=e),disabled:(0,d.SU)(l),placeholder:"请输入域名，例如：aapanel.com"},null,8,["value","disabled"])])]),_:1}),(0,d.kq)("",!0),(0,d.Wm)(s,{label:"域名配额"},{default:(0,d.w5)(()=>[(0,d.Wm)(c,{value:(0,d.SU)(n).quota,"onUpdate:value":u[2]||(u[2]=e=>(0,d.SU)(n).quota=e),class:"w-200px",min:0,"show-button":!1},null,8,["value"]),(0,d._)("div",h,[(0,d.Wm)(p,{value:(0,d.SU)(n).quota_unit,"onUpdate:value":u[3]||(u[3]=e=>(0,d.SU)(n).quota_unit=e),options:i},null,8,["value"])])]),_:1}),(0,d.Wm)(s,{label:"邮箱数量"},{default:(0,d.w5)(()=>[(0,d.Wm)(c,{value:(0,d.SU)(n).mailboxes,"onUpdate:value":u[4]||(u[4]=e=>(0,d.SU)(n).mailboxes=e),class:"w-320px",min:0,"show-button":!1},null,8,["value"])]),_:1}),(0,d.kq)("",!0)]),_:1},8,["model"]),(0,d.kq)("",!0)])]),_:1},8,["title"])}}}),b={class:"py-20px"},g={class:"w-290px"},Z=(0,d.aZ)({__name:"DomainCatch",setup(e){let l=(0,d.qj)({email:""}),[t]=(0,s.d)({onConfirm:async()=>{}});return(e,a)=>{let n=x.Z,i=U.ZP,r=f.Z;return(0,d.wg)(),(0,d.j4)((0,d.SU)(t),{title:"捕获邮件",width:540},{default:(0,d.w5)(()=>[(0,d._)("div",b,[(0,d.Wm)(r,{model:(0,d.SU)(l)},{default:(0,d.w5)(()=>[(0,d.Wm)(i,{label:"转发邮件","show-feedback":!1},{default:(0,d.w5)(()=>[(0,d._)("div",g,[(0,d.Wm)(n,{value:(0,d.SU)(l).email,"onUpdate:value":a[0]||(a[0]=e=>(0,d.SU)(l).email=e),placeholder:"捕获不存在的邮件，转发至此邮件"},null,8,["value"])])]),_:1})]),_:1},8,["model"])])]),_:1})}}});var q=t(4671);let C=(0,d.aZ)({__name:"index",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){let l=(0,d.tT)(e,"value");return(e,t)=>{let a=q.Z;return(0,d.wg)(),(0,d.j4)(a,{value:l.value,"onUpdate:value":t[0]||(t[0]=e=>l.value=e),class:"bt-tabs h-full",type:"card",placement:"top"},{default:(0,d.w5)(()=>[(0,d.WI)(e.$slots,"default")]),_:3},8,["value"])}}}),P=(0,_.default)(C,[["__scopeId","data-v-aa8a5942"]]);var T=t(6720),z=t(4352),D=t(3236);let M={class:"ssl-cert-container"},j={class:"brand-info"},R={class:"info-value"},E={class:"info-value font-normal!"},F={class:"cert-content"},H={class:"cert-section"},X={class:"cert-section"},I={class:"cert-actions"},B=(0,d.aZ)({__name:"OtherCert",props:{domain:{type:Object,required:!0},refresh:{type:Function,required:!0}},setup(e){let l=(0,d.Fl)(()=>e.domain.cert_info.dns),t=(0,d.iH)(""),a=(0,d.iH)(""),n=async()=>{await (0,c.OV)({domain:e.domain.domain,key:t.value,certificate:a.value}),e.refresh()},i=async()=>{await (0,c.yW)({domain:e.domain.domain}),e.refresh()};return t.value=e.domain.cert_info.key_pem,a.value=e.domain.cert_info.cert_pem,(u,o)=>{let s=D.ZP,m=z.Z,c=x.Z,p=r.ZP;return(0,d.wg)(),(0,d.iD)("div",M,[e.domain.cert_info.endtime>0?((0,d.wg)(),(0,d.j4)(m,{key:0,class:"mb-16px",type:"success","show-icon":!1},{default:(0,d.w5)(()=>[(0,d._)("div",j,[o[2]||(o[2]=(0,d._)("div",{class:"info-label"},"品牌：",-1)),(0,d._)("div",R,(0,d.zw)(e.domain.cert_info.issuer),1),o[3]||(o[3]=(0,d._)("div",{class:"info-label"},"证书域名：",-1)),(0,d._)("div",E,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)((0,d.SU)(l),(e,l)=>((0,d.wg)(),(0,d.j4)(s,{key:l,size:"small"},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e),1)]),_:2},1024))),128))])])]),_:1})):(0,d.kq)("",!0),(0,d._)("div",F,[(0,d._)("div",H,[o[4]||(o[4]=(0,d._)("div",{class:"section-title"},"私钥 (KEY)",-1)),(0,d.Wm)(c,{value:(0,d.SU)(t),"onUpdate:value":o[0]||(o[0]=e=>(0,d.dq)(t)?t.value=e:null),type:"textarea",placeholder:"",rows:14,"input-props":{spellcheck:!1}},null,8,["value"])]),(0,d._)("div",X,[o[5]||(o[5]=(0,d._)("div",{class:"section-title"},"证书 (CRT/PEM)",-1)),(0,d.Wm)(c,{value:(0,d.SU)(a),"onUpdate:value":o[1]||(o[1]=e=>(0,d.dq)(a)?a.value=e:null),type:"textarea",placeholder:"","input-props":{spellcheck:!1},rows:14},null,8,["value"])])]),(0,d._)("div",I,[(0,d.Wm)(p,{type:"primary",onClick:n},{default:(0,d.w5)(()=>o[6]||(o[6]=[(0,d.Uk)("保存")])),_:1}),(0,d.Wm)(p,{type:"primary",onClick:i},{default:(0,d.w5)(()=>o[7]||(o[7]=[(0,d.Uk)("申请免费证书")])),_:1})]),(0,d.Wm)(v,null,{default:(0,d.w5)(()=>o[8]||(o[8]=[(0,d._)("li",null,"粘贴您的 KEY 和 CRT 内容，然后保存",-1),(0,d._)("li",null,"如果浏览器提示证书链不完整，请检查 PEM 证书是否正确拼接",-1),(0,d._)("li",null,"PEM 格式证书 = 域名证书 .crt + 根证书 (root_bundle).crt",-1),(0,d._)("li",null,"当未指定 SSL 默认站点时，未配置 SSL 的站点将使用 HTTPS 访问启用了 SSL 的站点",-1)])),_:1})])}}}),O=(0,_.default)(B,[["__scopeId","data-v-54ed90c9"]]),G=(0,d.aZ)({__name:"index",setup(e){let l=(0,d.iH)("other"),t=(0,d.iH)(null),[a,n]=(0,s.d)({onChangeState:e=>{if(e){let{row:e}=n.getState();e&&(t.value=e)}}}),i=()=>{n.getState().refresh()};return(e,n)=>{let r=T.Z;return(0,d.wg)(),(0,d.j4)((0,d.SU)(a),{title:"Domain SSL",width:650,footer:!1},{default:(0,d.w5)(()=>[(0,d.Wm)(P,{value:(0,d.SU)(l),"onUpdate:value":n[0]||(n[0]=e=>(0,d.dq)(l)?l.value=e:null)},{default:(0,d.w5)(()=>[(0,d.Wm)(r,{name:"other",tab:"Other certificate"},{default:(0,d.w5)(()=>[(0,d.SU)(t)?((0,d.wg)(),(0,d.j4)(O,{key:0,domain:(0,d.SU)(t),refresh:i},null,8,["domain"])):(0,d.kq)("",!0)]),_:1})]),_:1},8,["value"])]),_:1})}}});var K=t(5476),L=t(5191),N=t(5962),$=t(6499),A=t(6775);let Y={class:"pt-20px"},V=(0,d.aZ)({__name:"DomainDns",setup(e){let l=(0,d.iH)([]),t=e=>l.value.length>0?l.value[0].dns_records[e].value:"",a=(0,d.Fl)(()=>t("dkim")),n=(0,d.Fl)(()=>t("mx")),u=(0,d.Fl)(()=>t("dmarc")),m=(0,d.Fl)(()=>"v=spf1 +a +mx  -all"),c=e=>{let{status:l}=e;return(0,d.Wm)("div",{class:["inline-flex items-center",l?"text-primary":"text-error"]},[(0,d.Wm)(N.g,{size:"16"},{default:()=>[l?(0,d.Wm)($.Z,null,null):(0,d.Wm)(A.Z,null,null)]}),(0,d.Wm)("span",{class:"ml-4px"},[l?"OK":"Not Set"])])},p=(0,d.iH)([{key:"domain",title:"域名",width:"20%",ellipsis:{tooltip:!0}},{key:"mx",title:"MX",render:e=>{let l=e.dns_records.mx;return(0,d.Wm)(c,{status:(null==l?void 0:l.valid)||!1},null)}},{key:"a",title:"A record",render:e=>{let l=e.dns_records.a;return(0,d.Wm)(c,{status:(null==l?void 0:l.valid)||!1},null)}},{key:"spf",title:"SPF",render:e=>{let l=e.dns_records.spf;return(0,d.Wm)(c,{status:(null==l?void 0:l.valid)||!1},null)}},{key:"dkim",title:"DKIM",render:e=>{let l=e.dns_records.dkim;return(0,d.Wm)(c,{status:(null==l?void 0:l.valid)||!1},null)}},{key:"dmarc",title:"DMARC",render:e=>{let l=e.dns_records.dmarc;return(0,d.Wm)(c,{status:(null==l?void 0:l.valid)||!1},null)}},{key:"ptr",title:"PTR",render:e=>{let l=e.dns_records.ptr;return(0,d.Wm)(c,{status:(null==l?void 0:l.valid)||!1},null)}}]),[_,v]=(0,s.d)({onChangeState:e=>{if(e){let{row:e}=v.getState();e&&(l.value=[e])}}});return(e,t)=>{let s=i.Z,c=L.Z,v=K.ZP,f=r.ZP;return(0,d.wg)(),(0,d.j4)((0,d.SU)(_),{title:"DNS Record",width:750,footer:!1},{default:(0,d.w5)(()=>[(0,d._)("div",Y,[(0,d.Wm)(s,{class:"mb-20px",data:(0,d.SU)(l),columns:(0,d.SU)(p)},null,8,["data","columns"]),t[17]||(t[17]=(0,d._)("div",{class:"record-title"},"步骤1：添加MX记录",-1)),t[18]||(t[18]=(0,d._)("div",{class:"record-desc"}," 登录到域名服务提供商，添加记录类型为MX的记录用于邮箱服务（请直接复制以下参数） ",-1)),(0,d.Wm)(c,{class:"mb-30px"},{default:(0,d.w5)(()=>[t[6]||(t[6]=(0,d._)("thead",null,[(0,d._)("tr",null,[(0,d._)("th",null,"记录类型"),(0,d._)("th",null,"主机记录"),(0,d._)("th",null,"记录值"),(0,d._)("th",null,"MX优先级")])],-1)),(0,d._)("tbody",null,[(0,d._)("tr",null,[t[3]||(t[3]=(0,d._)("td",null,"MX",-1)),t[4]||(t[4]=(0,d._)("td",null,"@",-1)),(0,d._)("td",null,(0,d.zw)((0,d.SU)(n)),1),t[5]||(t[5]=(0,d._)("td",null,"10",-1))])])]),_:1}),t[19]||(t[19]=(0,d._)("div",{class:"record-title"},"步骤2：添加TXT记录",-1)),t[20]||(t[20]=(0,d._)("div",{class:"record-desc"},"添加记录类型为TXT的记录用于邮箱反垃圾邮件（请直接复制以下参数）",-1)),(0,d.Wm)(c,{class:"mb-30px"},{default:(0,d.w5)(()=>[t[16]||(t[16]=(0,d._)("thead",null,[(0,d._)("tr",null,[(0,d._)("th",null,"记录类型"),(0,d._)("th",null,"主机记录"),(0,d._)("th",null,"记录值")])],-1)),(0,d._)("tbody",null,[(0,d._)("tr",null,[t[8]||(t[8]=(0,d._)("td",null,"TXT",-1)),t[9]||(t[9]=(0,d._)("td",null,"@",-1)),(0,d._)("td",null,[(0,d.Wm)(v,{class:"mr-4px max-w-360px!"},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)((0,d.SU)(m)),1)]),_:1}),(0,d.Wm)(f,{text:"",type:"primary",onClick:t[0]||(t[0]=e=>(0,d.SU)(o.zp)((0,d.SU)(m)))},{default:(0,d.w5)(()=>t[7]||(t[7]=[(0,d.Uk)("(Copy)")])),_:1})])]),(0,d._)("tr",null,[t[11]||(t[11]=(0,d._)("td",null,"TXT",-1)),t[12]||(t[12]=(0,d._)("td",null,"default._domainkey",-1)),(0,d._)("td",null,[(0,d.Wm)(v,{class:"mr-4px max-w-360px!"},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)((0,d.SU)(a)||"--"),1)]),_:1}),(0,d.SU)(a)?((0,d.wg)(),(0,d.j4)(f,{key:0,text:"",type:"primary",onClick:t[1]||(t[1]=e=>(0,d.SU)(o.zp)((0,d.SU)(a)))},{default:(0,d.w5)(()=>t[10]||(t[10]=[(0,d.Uk)(" (Copy) ")])),_:1})):(0,d.kq)("",!0)])]),(0,d._)("tr",null,[t[14]||(t[14]=(0,d._)("td",null,"TXT",-1)),t[15]||(t[15]=(0,d._)("td",null,"_dmarc",-1)),(0,d._)("td",null,[(0,d.Wm)(v,{class:"mr-4px max-w-360px!"},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)((0,d.SU)(u)),1)]),_:1}),(0,d.SU)(u)?((0,d.wg)(),(0,d.j4)(f,{key:0,text:"",type:"primary",onClick:t[2]||(t[2]=e=>(0,d.SU)(o.zp)((0,d.SU)(u)))},{default:(0,d.w5)(()=>t[13]||(t[13]=[(0,d.Uk)(" (Copy) ")])),_:1})):(0,d.kq)("",!0)])])])]),_:1}),t[21]||(t[21]=(0,d._)("div",{class:"record-title"},"步骤3：添加PTR记录",-1)),t[22]||(t[22]=(0,d._)("div",{class:"record-desc"},"（可选）PTR记录用于反向 DNS 查找",-1)),t[23]||(t[23]=(0,d._)("div",{class:"record-desc"},"联系您的IP提供商创建 PTR 记录",-1))])]),_:1})}}}),J=(0,_.default)(V,[["__scopeId","data-v-90e3ef18"]]),Q={class:"p-24px"},ee=(0,d.aZ)({__name:"index",setup(e){let{tableParams:l,tableList:t,loading:p,tableTotal:_,getTableData:v}=(0,m.Z)({immediate:!0,params:{page:1,page_size:10,keyword:""},fetchFn:c.i7}),f=(0,d.iH)([{key:"domain",title:"域名",minWidth:130,ellipsis:{tooltip:!0}},{title:"quota",key:"quota",render:e=>(0,o.UO)(e.quota)},{key:"mailboxes",title:"Mailboxes"},{key:"mailbox_quota",title:"Default mailbox size",render:e=>(0,o.UO)(e.mailbox_quota)},{key:"ssl",title:"SSL",render:e=>{if(e.cert_info&&e.cert_info.endtime){let l=Math.floor((1e3*e.cert_info.endtime-Date.now())/1e3/60/60/24);return(0,d.Wm)(r.ZP,{type:l<0?"error":"primary",text:!0,onClick:()=>{h(e)}},{default:()=>[l<0?"已过期":`${l}天`]})}return(0,d.Wm)(r.ZP,{type:"warning",text:!0,onClick:()=>{h(e)}},{default:()=>[(0,d.Uk)("未设置")]})}},{title:"操作",key:"actions",align:"right",render:e=>(0,d.Wm)(u.Z,{inline:!0},{default:()=>[(0,d.Wm)(r.ZP,{type:"primary",text:!0,onClick:()=>{q(e)}},{default:()=>[(0,d.Uk)("DNS记录")]}),(0,d.Wm)(r.ZP,{type:"primary",text:!0,onClick:()=>{C(e)}},{default:()=>[(0,d.Uk)("编辑")]}),(0,d.Wm)(r.ZP,{type:"error",text:!0,onClick:()=>{P(e)}},{default:()=>[(0,d.Uk)("删除")]})]})}]),[w,S]=(0,s.d)({component:W,state:{isEdit:!1,refresh:v}}),U=()=>{S.setState({row:null,isEdit:!1}),S.open()},[x]=(0,s.d)({component:Z}),[k,y]=(0,s.d)({component:G,state:{refresh:v}}),h=e=>{y.setState({row:e}),y.open()},[b,g]=(0,s.d)({component:J,state:{}}),q=e=>{g.setState({row:e}),g.open()},C=e=>{S.setState({row:e,isEdit:!0}),S.open()},P=e=>{(0,o.iG)({title:"删除域名",content:`确定要删除域名【${e.domain}】吗？`,confirmText:"删除",confirmType:"error",onConfirm:async()=>{await (0,c.dj)({domain:e.domain}),v()}})};return(e,u)=>{let o=i.Z,s=n.Z,m=a.Z;return(0,d.wg)(),(0,d.iD)("div",Q,[u[3]||(u[3]=(0,d._)("div",{class:"mb-20px text-24px font-bold"},"MailDomain",-1)),(0,d.Wm)(m,null,{toolsLeft:(0,d.w5)(()=>[(0,d.Wm)((0,d.SU)(r.ZP),{type:"primary",onClick:U},{default:(0,d.w5)(()=>u[2]||(u[2]=[(0,d.Uk)("添加域名")])),_:1})]),table:(0,d.w5)(()=>[(0,d.Wm)(o,{loading:(0,d.SU)(p),columns:(0,d.SU)(f),data:(0,d.SU)(t)},null,8,["loading","columns","data"])]),pageRight:(0,d.w5)(()=>[(0,d.Wm)(s,{page:(0,d.SU)(l).page,"onUpdate:page":u[0]||(u[0]=e=>(0,d.SU)(l).page=e),"page-size":(0,d.SU)(l).page_size,"onUpdate:pageSize":u[1]||(u[1]=e=>(0,d.SU)(l).page_size=e),"item-count":(0,d.SU)(_),onRefresh:(0,d.SU)(v)},null,8,["page","page-size","item-count","onRefresh"])]),modal:(0,d.w5)(()=>[(0,d.Wm)((0,d.SU)(w)),(0,d.Wm)((0,d.SU)(x)),(0,d.Wm)((0,d.SU)(k)),(0,d.Wm)((0,d.SU)(b))]),_:1})])}}}),el=(0,_.default)(ee,[["__scopeId","data-v-0a49638a"]])}}]);