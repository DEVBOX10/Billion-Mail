"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["993"],{2822:function(e,t,a){a.d(t,{Z:()=>r});var l=a(1452),n=a(2398);let r=function(e){return"number"==typeof e||(0,n.Z)(e)&&"[object Number]"==(0,l.Z)(e)}},9506:function(e,t,a){a.d(t,{Z:()=>g});var l=a(5083),n=a(209),r=a(1321),o=a(4124),i=a(2931),u=a(2249),s=a(6253),c=a(3876);let d={gapSmall:"4px 8px",gapMedium:"8px 12px",gapLarge:"12px 16px"},m={name:"Flex",self:function(){return d}},p=Object.assign(Object.assign({},r.Z.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrap:{type:Boolean,default:!0}}),g=(0,n.aZ)({name:"Flex",props:p,setup(e){let{mergedClsPrefixRef:t,mergedRtlRef:a}=(0,o.ZP)(e),s=(0,r.Z)("Flex","-flex",void 0,m,e,t);return{rtlEnabled:(0,i.V)("Flex",a,t),mergedClsPrefix:t,margin:(0,n.Fl)(()=>{let{size:t}=e;if(Array.isArray(t))return{horizontal:t[0],vertical:t[1]};if("number"==typeof t)return{horizontal:t,vertical:t};let{self:{[(0,u.Tl)("gap",t)]:a}}=s.value,{row:n,col:r}=(0,l.yU)(a);return{horizontal:(0,l.fQ)(r),vertical:(0,l.fQ)(n)}})}},render(){let{vertical:e,reverse:t,align:a,inline:l,justify:r,margin:o,wrap:i,mergedClsPrefix:u,rtlEnabled:d}=this,m=(0,s.x)((0,c.z)(this),!1);return m.length?(0,n.h)("div",{role:"none",class:[`${u}-flex`,d&&`${u}-flex--rtl`],style:{display:l?"inline-flex":"flex",flexDirection:e&&!t?"column":e&&t?"column-reverse":!e&&t?"row-reverse":"row",justifyContent:r,flexWrap:!i||e?"nowrap":"wrap",alignItems:a,gap:`${o.vertical}px ${o.horizontal}px`}},m):null}})},1625:function(e,t,a){a.d(t,{WH:()=>o,hI:()=>r,iE:()=>s,mD:()=>u,sS:()=>i,vi:()=>c});var l=a(4203);let{t:n}=a(4958).Z.global,r=e=>l.e.get("/contact/group/list",{params:e}),o=()=>l.e.get("/contact/group/all"),i=e=>l.e.post("/contact/group/create",e,{fetchOptions:{loading:n("contacts.group.loading.createGroup"),successMessage:!0}}),u=e=>l.e.post("/contact/group/update",e,{fetchOptions:{loading:n("contacts.group.loading.updateGroup"),successMessage:!0}}),s=e=>l.e.post("/contact/group/delete",e,{fetchOptions:{loading:n("contacts.group.loading.deleteGroup"),successMessage:!0}}),c=e=>l.e.post("/contact/group/contact_count",e)},5523:function(e,t,a){a.d(t,{Z:()=>r});var l=a(710),n=a(209);let r=(0,n.aZ)({__name:"index",props:{model:{},rules:{},labelWidth:{default:"130"},labelPlacement:{default:"left"}},setup(e,t){let{expose:a}=t,r=(0,n.iH)(null);return a({validate:()=>{var e;return null===(e=r.value)||void 0===e?void 0:e.validate()},restoreValidation:()=>{var e;return null===(e=r.value)||void 0===e?void 0:e.restoreValidation()}}),(e,t)=>{let a=l.Z;return(0,n.wg)(),(0,n.j4)(a,(0,n.dG)(e.$attrs,{ref_key:"formRef",ref:r,model:e.model,rules:e.rules,"label-width":e.labelWidth,"label-placement":e.labelPlacement,"show-require-mark":!1}),{default:(0,n.w5)(()=>[(0,n.WI)(e.$slots,"default")]),_:3},16,["model","rules","label-width","label-placement"])}}})},5101:function(e,t,a){a.r(t),a.d(t,{default:()=>W});var l=a(9454),n=a(2403),r=a(2609),o=a(7579),i=a(209),u=a(3447),s=a(9506),c=a(3312),d=a(6949),m=a(825),p=a(1625),g=a(5523),f=a(6883),v=a(8454),h=a(5778);let S={class:"pt-12px"},w={class:"w-240px"},_=(0,i.aZ)({__name:"GroupAdd",setup(e){let{t}=(0,h.QT)(),a=(0,i.AE)("formRef"),l=(0,i.qj)({create_type:1,name:""}),n={name:{required:!0,message:t("contacts.group.form.nameRequired"),trigger:"blur"}},[r,o]=(0,c.d)({onChangeState:e=>{e&&(l.name="")},onConfirm:async()=>{var e;await (null===(e=a.value)||void 0===e?void 0:e.validate()),await (0,p.sS)((0,i.IU)(l));let t=o.getState();null==t||t.refresh()}});return(e,o)=>{let u=v.Z,s=f.ZP,c=g.Z;return(0,i.wg)(),(0,i.j4)((0,i.SU)(r),{title:(0,i.SU)(t)("contacts.group.add.title"),width:"460"},{default:(0,i.w5)(()=>[(0,i._)("div",S,[(0,i.Wm)(c,{ref_key:"formRef",ref:a,model:(0,i.SU)(l),rules:n},{default:(0,i.w5)(()=>[(0,i.Wm)(s,{label:(0,i.SU)(t)("contacts.group.form.name"),path:"name"},{default:(0,i.w5)(()=>[(0,i._)("div",w,[(0,i.Wm)(u,{value:(0,i.SU)(l).name,"onUpdate:value":o[0]||(o[0]=e=>(0,i.SU)(l).name=e)},null,8,["value"])])]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1},8,["title"])}}}),b={class:"pt-12px"},y={class:"w-240px"},U=(0,i.aZ)({__name:"GroupRename",setup(e){let{t}=(0,h.QT)(),a=(0,i.AE)("formRef"),l=(0,i.qj)({group_id:0,name:""}),n={name:{required:!0,message:t("contacts.group.form.nameRequired"),trigger:"blur"}},[r,o]=(0,c.d)({onChangeState:e=>{if(e){let{row:e}=o.getState();e&&(l.group_id=e.id,l.name=e.name)}else l.group_id=0,l.name=""},onConfirm:async()=>{var e;await (null===(e=a.value)||void 0===e?void 0:e.validate()),await (0,p.mD)((0,i.IU)(l));let t=o.getState();null==t||t.refresh()}});return(e,o)=>{let u=v.Z,s=f.ZP,c=g.Z;return(0,i.wg)(),(0,i.j4)((0,i.SU)(r),{title:(0,i.SU)(t)("contacts.group.rename.title"),width:"480"},{default:(0,i.w5)(()=>[(0,i._)("div",b,[(0,i.Wm)(c,{ref_key:"formRef",ref:a,model:(0,i.SU)(l),rules:n},{default:(0,i.w5)(()=>[(0,i.Wm)(s,{label:(0,i.SU)(t)("contacts.group.form.name"),path:"name"},{default:(0,i.w5)(()=>[(0,i._)("div",y,[(0,i.Wm)(u,{value:(0,i.SU)(l).name,"onUpdate:value":o[0]||(o[0]=e=>(0,i.SU)(l).name=e)},null,8,["value"])])]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1},8,["title"])}}});var x=a(5e3);function Z(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,i.lA)(e)}let W=(0,i.aZ)({__name:"index",setup(e){let{t}=(0,h.QT)(),a=(0,x.tv)(),{tableParams:g,tableList:f,loading:v,tableTotal:S,getTableData:w}=(0,d.Z)({loading:!0,immediate:!0,params:{page:1,page_size:10,keyword:""},fetchFn:p.hI}),b=(0,i.iH)([{key:"name",title:t("contacts.group.columns.name"),minWidth:120,render:e=>(0,i.Wm)(u.ZP,{text:!0,type:"primary",onClick:()=>{a.push({path:"/contacts/subscribers",state:{group_id:e.id}})}},{default:()=>[e.name]})},{key:"total_count",title:t("contacts.group.columns.subscribers"),minWidth:100,render:e=>e.total_count||0},{key:"unsubscribe_count",title:t("contacts.group.columns.unsubscribe"),minWidth:100,render:e=>e.unsubscribe_count||0},{key:"create_time",title:t("contacts.group.columns.createdAt"),minWidth:140,render:e=>(0,m.mr)(e.create_time)},{title:t("common.columns.actions"),key:"actions",align:"right",width:120,render:e=>{let a,l;return(0,i.Wm)(s.Z,{inline:!0},{default:()=>[(0,i.Wm)(u.ZP,{type:"primary",text:!0,onClick:()=>{C(e)}},Z(a=t("common.actions.rename"))?a:{default:()=>[a]}),(0,i.Wm)(u.ZP,{type:"error",text:!0,onClick:()=>{R(e)}},Z(l=t("common.actions.delete"))?l:{default:()=>[l]})]})}}]),[y,W]=(0,c.d)({component:_,state:{refresh:w}}),k=()=>{W.open()},[j,z]=(0,c.d)({component:U,state:{refresh:w}}),C=e=>{z.setState({row:e}),z.open()},R=e=>{(0,m.iG)({title:t("contacts.group.delete.title"),content:t("contacts.group.delete.confirm",{name:e.name}),confirmText:t("common.actions.delete"),confirmType:"error",onConfirm:async()=>{await (0,p.iE)({group_ids:[e.id]}),w()}})};return(e,a)=>{let s=o.Z,c=r.Z,d=n.Z,m=l.Z;return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(m,null,{toolsLeft:(0,i.w5)(()=>[(0,i.Wm)((0,i.SU)(u.ZP),{type:"primary",onClick:k},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)((0,i.SU)(t)("common.actions.add")),1)]),_:1})]),toolsRight:(0,i.w5)(()=>[(0,i.Wm)(s,{value:(0,i.SU)(g).keyword,"onUpdate:value":a[0]||(a[0]=e=>(0,i.SU)(g).keyword=e),width:280,placeholder:(0,i.SU)(t)("contacts.group.search.namePlaceholder"),onSearch:a[1]||(a[1]=()=>(0,i.SU)(w)(!0))},null,8,["value","placeholder"])]),table:(0,i.w5)(()=>[(0,i.Wm)(c,{loading:(0,i.SU)(v),columns:(0,i.SU)(b),data:(0,i.SU)(f)},null,8,["loading","columns","data"])]),pageRight:(0,i.w5)(()=>[(0,i.Wm)(d,{page:(0,i.SU)(g).page,"onUpdate:page":a[2]||(a[2]=e=>(0,i.SU)(g).page=e),"page-size":(0,i.SU)(g).page_size,"onUpdate:pageSize":a[3]||(a[3]=e=>(0,i.SU)(g).page_size=e),"item-count":(0,i.SU)(S),onRefresh:(0,i.SU)(w)},null,8,["page","page-size","item-count","onRefresh"])]),modal:(0,i.w5)(()=>[(0,i.Wm)((0,i.SU)(y)),(0,i.Wm)((0,i.SU)(j))]),_:1})])}}})}}]);