"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["222"],{55:function(e,a,t){t.d(a,{Au:()=>c,Fj:()=>d,LC:()=>s,OV:()=>u,dj:()=>n,gK:()=>o,i7:()=>r,v1:()=>v,yW:()=>p});var l=t(4203);let{t:i}=t(4958).Z.global,r=e=>l.e.get("/domains/list",{params:e}),s=()=>l.e.get("/domains/all"),d=e=>l.e.post("/domains/create",e,{fetchOptions:{loading:i("domain.api.loading.creating"),successMessage:!0}}),o=e=>l.e.post("/domains/update",e,{fetchOptions:{loading:i("domain.api.loading.updating"),successMessage:!0}}),n=e=>l.e.post("/domains/delete",e,{fetchOptions:{loading:i("domain.api.loading.deleting"),successMessage:!0}}),u=e=>l.e.post("/domains/set_ssl",e,{fetchOptions:{loading:i("domain.api.loading.settingSSL"),successMessage:!0}}),c=e=>l.e.get("/domains/get_ssl",{params:e}),v=e=>l.e.post("/domains/fresh_dns_records",e,{fetchOptions:{loading:i("domain.api.loading.refreshingDns"),successMessage:!0}}),p=e=>l.e.post("/ssl/apply_cert",e,{fetchOptions:{loading:i("domain.api.loading.applyingCert"),successMessage:!0}})},5290:function(e,a,t){t.r(a),t.d(a,{default:()=>ep});var l=t(6528),i=t(209),r=t(5098),s=t(825),d=t(4203);let o=e=>d.e.get("/overview",{params:e});var n=t(6534),u=t(2171),c=t(8943),v=t(5891),p=t(7987),m=t(6760),h=t(9468),y=t(55),_=t(5778);let g={class:"filter-bar"},b={class:"w-260px"},w={class:"date-filters"},f={class:"w-240px"},S=(0,i.aZ)({__name:"FilterBar",props:{domain:{},domainModifiers:{},dateRange:{},dateRangeModifiers:{}},emits:["update:domain","update:dateRange"],setup(e){let{t:a}=(0,_.QT)(),t=(0,i.tT)(e,"domain"),l=(0,i.tT)(e,"dateRange"),r=(0,i.iH)([{label:a("common.all.domain"),value:""}]),d=(0,i.iH)("today"),o=e=>{let a=new Date,t=(0,p.E)(a,-30);return(0,m.b)(t).getTime()>e||(0,h.i)(a).getTime()<e},S=e=>{switch(e){case"today":l.value=(0,s.wb)();break;case"yesterday":l.value=(0,s.wb)((0,p.E)(new Date,-1));break;case"last7days":l.value=U()}},U=()=>{let e=new Date,a=(0,h.i)(e);return[(0,m.b)((0,p.E)(e,-6)).getTime(),a.getTime()]},k=e=>{d.value="custom",l.value=[(0,m.b)(e[0]).getTime(),(0,h.i)(e[1]).getTime()]},x=async()=>{let e=await (0,y.LC)();(0,s.kJ)(e)&&(r.value=e.map(e=>({label:e.domain,value:e.domain})),r.value.unshift({label:a("common.all.domain"),value:""}))};return(0,i.bv)(()=>{x()}),(e,a)=>{let s=v.Z,p=c.Z,m=u.Z,h=n.Z;return(0,i.wg)(),(0,i.iD)("div",g,[(0,i._)("div",b,[(0,i.Wm)(s,{value:t.value,"onUpdate:value":a[0]||(a[0]=e=>t.value=e),options:(0,i.SU)(r)},null,8,["value","options"])]),(0,i._)("div",w,[(0,i.Wm)(m,{value:(0,i.SU)(d),"onUpdate:value":[a[1]||(a[1]=e=>(0,i.dq)(d)?d.value=e:null),S]},{default:(0,i.w5)(()=>[(0,i.Wm)(p,{value:"today"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(e.$t("common.time.today")),1)]),_:1}),(0,i.Wm)(p,{value:"yesterday"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(e.$t("common.time.yesterday")),1)]),_:1}),(0,i.Wm)(p,{value:"last7days"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(e.$t("common.time.last7days")),1)]),_:1})]),_:1},8,["value"]),(0,i._)("div",f,[(0,i.Wm)(h,{value:l.value,type:"daterange","is-date-disabled":o,"onUpdate:value":k},null,8,["value"])])])])}}});var U=t(4222);let k=(0,U.default)(S,[["__scopeId","data-v-1552f451"]]),x={class:"title"},D={class:"value"},W=(0,i.aZ)({__name:"MetricCard",props:{title:{type:String,default:""},value:{type:Number,default:0}},setup:e=>(a,t)=>{let r=l.ZP;return(0,i.wg)(),(0,i.j4)(r,{class:"metric-card",bordered:!1},{default:(0,i.w5)(()=>[(0,i._)("div",x,(0,i.zw)(e.title),1),(0,i._)("div",D,(0,i.zw)(e.value)+"%",1)]),_:1})}}),H=(0,U.default)(W,[["__scopeId","data-v-6c59c28a"]]);var z=t(6419);let M={class:"provider-table"},R=(0,i.aZ)({__name:"ProviderTable",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){let{t:a}=(0,_.QT)(),t=(0,i.tT)(e,"value"),l=e=>e>=0?`${e}%`:"--",r=(0,i.iH)([{key:"mail_provider",title:a("overview.provider.mailProvider"),ellipsis:{tooltip:!0}},{key:"delivery_rate",title:a("overview.provider.delivered"),render:e=>l(e.delivery_rate)},{key:"open_rate",title:a("overview.provider.open"),render:e=>l(e.open_rate)},{key:"click_rate",title:a("overview.provider.click"),render:e=>l(e.click_rate)},{key:"bounce_rate",title:a("overview.provider.bounce"),render:e=>l(e.bounce_rate)}]);return(e,a)=>((0,i.wg)(),(0,i.iD)("div",M,[(0,i.Wm)((0,i.SU)(z.Z),{columns:(0,i.SU)(r),data:t.value,bordered:!1},null,8,["columns","data"])]))}});var Z=t(392),O=t(2994),$=t(8449),q=t(838),T=t(4863),j=t(2632),C=t(5691),F=t(8964),N=t(5391),P=t(5334),L=t(2635);let A={__name:"index",props:{options:{type:Object,required:!0},height:{type:[String,Number],default:"100%"},theme:{type:String,default:"default"},notMerge:{type:Boolean,default:!1},lazyUpdate:{type:Boolean,default:!1}},setup(e,a){let{expose:t}=a;Z.D([T.N,j.N,C.N,F.N,N.N,P.N,$.N,q.N,L.N]);let l=(0,i.iH)(null),r=(0,i.Fl)(()=>"number"==typeof e.height?`${e.height}px`:e.height),s=null,d=null,o=()=>{l.value&&(s=O.S1(l.value,e.theme,{renderer:"canvas",useDirtyRect:!0}),n(),(d=new ResizeObserver(()=>{requestAnimationFrame(()=>{null==s||s.resize()})})).observe(l.value))},n=()=>{s&&e.options&&s.setOption(e.options,{notMerge:e.notMerge,lazyUpdate:e.lazyUpdate})};return(0,i.bv)(()=>{o()}),(0,i.SK)(()=>{null==d||d.disconnect(),s&&(s.dispose(),s=null)}),(0,i.YP)(()=>e.options,()=>{n()},{deep:!0}),(0,i.YP)(()=>e.theme,()=>{s&&(s.dispose(),o())}),t({getChartInstance:()=>s,resize:()=>null==s?void 0:s.resize()}),(e,a)=>((0,i.wg)(),(0,i.iD)("div",{ref_key:"chartRef",ref:l,style:(0,i.j5)({width:"100%",height:(0,i.SU)(r)})},null,4))}},I=(0,i.aZ)({__name:"BarChart",props:{chartData:{type:Object,required:!0}},setup(e){let a=(0,i.Fl)(()=>({grid:{top:"16%",left:"2%",right:"2%",bottom:"4%",containLabel:!0},legend:{top:0,itemGap:16,icon:"circle",itemWidth:10,itemHeight:10,data:[e.chartData.success.label,e.chartData.fail.label],textStyle:{lineHeight:12,padding:[0,0,-2,0],rich:{a:{verticalAlign:"middle"}}}},tooltip:{trigger:"axis",order:"seriesDesc",axisPointer:{type:"shadow"}},xAxis:{type:"category",axisLabel:{formatter:e=>(0,s.mr)(e,"HH:mm")}},yAxis:{type:"value",boundaryGap:[0,"6%"],splitLine:{show:!0,lineStyle:{type:"dashed",width:1,color:"#ebeef5"}}},series:[{type:"bar",name:e.chartData.fail.label,data:e.chartData.fail.value,stack:"total",itemStyle:{color:"#1A519B"}},{type:"bar",name:e.chartData.success.label,data:e.chartData.success.value,stack:"total",itemStyle:{color:"#91CC75"}}]}));return(e,t)=>((0,i.wg)(),(0,i.j4)(A,{options:(0,i.SU)(a)},null,8,["options"]))}}),B={class:"send-today-stats"},E={class:"stats-header"},K={class:"stat-item"},Q={class:"stat-label"},Y={class:"stat-value text-primary"},G={class:"stat-item"},J={class:"stat-label"},V={class:"stat-value text-primary"},X={class:"stat-item"},ee={class:"stat-label"},ea={class:"stat-value text-error"},et={class:"h-180px"},el=(0,i.aZ)({__name:"SendTodayStats",props:{data:{type:Object,required:!0}},setup(e){let{t:a}=(0,_.QT)(),t=(0,i.Fl)(()=>e.data.dashboard.delivery_rate),l=(0,i.Fl)(()=>e.data.dashboard.delivered),r=(0,i.Fl)(()=>e.data.dashboard.failed),d=(e,a)=>{let t=new Date;return"hourly"===e?(t.setMinutes(0),t.setSeconds(0),t.setHours(a)):"daily"===e&&(t=new Date(1e3*a)),(0,s.mr)(t)},o=(0,i.Fl)(()=>{let t=[],l=[];return e.data.data.forEach(a=>{t.push([d(e.data.column_type,a.x),a.failed,e.data.column_type]),l.push([d(e.data.column_type,a.x),a.delivered,e.data.column_type])}),{fail:{label:a("overview.send.sendFail"),value:t},success:{label:a("overview.send.sendSuccess"),value:l}}});return(e,a)=>((0,i.wg)(),(0,i.iD)("div",B,[(0,i._)("div",E,[(0,i._)("div",K,[(0,i._)("div",Q,(0,i.zw)(e.$t("overview.send.successRate")),1),(0,i._)("div",Y,(0,i.zw)((0,i.SU)(t))+"%",1)]),(0,i._)("div",G,[(0,i._)("div",J,(0,i.zw)(e.$t("overview.send.success")),1),(0,i._)("div",V,(0,i.zw)((0,i.SU)(l)),1)]),(0,i._)("div",X,[(0,i._)("div",ee,(0,i.zw)(e.$t("overview.send.fail")),1),(0,i._)("div",ea,(0,i.zw)((0,i.SU)(r)),1)])]),(0,i._)("div",et,[(0,i.Wm)(I,{"chart-data":(0,i.SU)(o)},null,8,["chart-data"])])]))}}),ei=(0,U.default)(el,[["__scopeId","data-v-8ff85f14"]]),er={class:"h-180px"},es=(0,i.aZ)({__name:"LineChart",props:{chartName:{type:String,required:!0},chartColor:{type:String,required:!0},chartData:{type:Array,required:!0}},setup(e){let a=(0,i.Fl)(()=>({tooltip:{trigger:"axis",order:"seriesDesc",axisPointer:{type:"shadow"}},grid:{top:"16%",left:"2%",right:"2%",bottom:"2%",containLabel:!0},xAxis:{type:"category",axisLabel:{formatter:e=>(0,s.mr)(e,"HH:mm")}},yAxis:{name:"%",type:"value",splitLine:{show:!0,lineStyle:{type:"dashed",width:1,color:"#ebeef5"}},max:e=>{let{max:a}=e;return a>100?100:a}},series:[{name:e.chartName,type:"line",data:e.chartData,itemStyle:{color:e.chartColor},smooth:!1,showSymbol:!1,sampling:"average"}]}));return(e,t)=>((0,i.wg)(),(0,i.iD)("div",er,[(0,i.Wm)(A,{options:(0,i.SU)(a)},null,8,["options"])]))}}),ed=(0,i.aZ)({__name:"RateChartPanel",props:{bounce:{type:Object,required:!0},click:{type:Object,required:!0},open:{type:Object,required:!0}},setup(e){let a=(e,a)=>{let t=new Date;return"hourly"===e?(t.setMinutes(0),t.setSeconds(0),t.setHours(a)):"daily"===e&&(t=new Date(1e3*a)),(0,s.mr)(t)},t=(0,i.Fl)(()=>e.open.data.map(t=>[a(e.open.column_type,t.x),t.open_rate])),r=(0,i.Fl)(()=>e.click.data.map(t=>[a(e.click.column_type,t.x),t.click_rate])),d=(0,i.Fl)(()=>e.bounce.data.map(t=>[a(e.bounce.column_type,t.x),t.bounce_rate]));return(e,a)=>{let s=l.ZP;return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(s,{title:e.$t("overview.rate.openRate")},{default:(0,i.w5)(()=>[(0,i.Wm)(es,{"chart-color":"#1a519b","chart-name":e.$t("overview.rate.openRate"),"chart-data":(0,i.SU)(t)},null,8,["chart-name","chart-data"])]),_:1},8,["title"]),(0,i.Wm)(s,{title:e.$t("overview.rate.clickRate")},{default:(0,i.w5)(()=>[(0,i.Wm)(es,{"chart-color":"#1a519b","chart-name":e.$t("overview.rate.clickRate"),"chart-data":(0,i.SU)(r)},null,8,["chart-name","chart-data"])]),_:1},8,["title"]),(0,i.Wm)(s,{title:e.$t("overview.rate.bounceRate")},{default:(0,i.w5)(()=>[(0,i.Wm)(es,{"chart-color":"#20a53a","chart-name":e.$t("overview.rate.bounceRate"),"chart-data":(0,i.SU)(d)},null,8,["chart-name","chart-data"])]),_:1},8,["title"])],64)}}}),eo={class:"email-analytics-container"},en={class:"metrics-cards"},eu={class:"detail-row"},ec={class:"rate-charts-card"},ev=(0,i.aZ)({__name:"index",setup(e){let{t:a}=(0,_.QT)(),t=(0,i.iH)(""),d=(0,i.iH)((0,s.wb)()),n=(0,i.iH)([]),u=(0,i.qj)({delivery:{label:a("overview.delivered"),value:0},open:{label:a("overview.opened"),value:0},click:{label:a("overview.clicked"),value:0},bounce:{label:a("overview.bounced"),value:0}}),c=(0,i.iH)({column_type:"hourly",dashboard:{delivered:0,delivery_rate:0,failed:0,failure_rate:0,sends:0},data:[]}),v=(0,i.iH)({column_type:"hourly",data:[]}),p=(0,i.iH)({column_type:"hourly",data:[]}),m=(0,i.iH)({column_type:"hourly",data:[]}),h=(0,r.DI)(g,300),y=e=>{Object.entries(e).forEach(e=>{let[a,t]=e,l=a.replace("_rate","");l in u&&(u[l].value=t)})};async function g(){let e=await o({domain:t.value,start_time:Math.floor(d.value[0]/1e3),end_time:Math.floor(d.value[1]/1e3)});(0,s.Kn)(e)&&(y(e.dashboard),n.value=e.mail_providers,c.value=e.send_mail_chart,v.value=e.bounce_rate_chart,p.value=e.click_rate_chart,m.value=e.open_rate_chart)}return(0,i.bv)(()=>{g()}),(e,a)=>{let r=l.ZP;return(0,i.wg)(),(0,i.iD)("div",eo,[(0,i.Wm)(k,{domain:(0,i.SU)(t),"onUpdate:domain":[a[0]||(a[0]=e=>(0,i.dq)(t)?t.value=e:null),(0,i.SU)(h)],"date-range":(0,i.SU)(d),"onUpdate:dateRange":[a[1]||(a[1]=e=>(0,i.dq)(d)?d.value=e:null),(0,i.SU)(h)]},null,8,["domain","date-range","onUpdate:domain","onUpdate:dateRange"]),(0,i._)("div",en,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,i.SU)(u),(e,a)=>((0,i.wg)(),(0,i.j4)(H,{key:a,title:e.label,value:e.value},null,8,["title","value"]))),128))]),(0,i._)("div",eu,[(0,i.Wm)(r,{class:"provider-table-card",title:e.$t("overview.mailProviders")},{default:(0,i.w5)(()=>[(0,i.Wm)(R,{value:(0,i.SU)(n),"onUpdate:value":a[2]||(a[2]=e=>(0,i.dq)(n)?n.value=e:null)},null,8,["value"])]),_:1},8,["title"]),(0,i.Wm)(r,{class:"send-today-card",title:e.$t("overview.sendStats")},{default:(0,i.w5)(()=>[(0,i.Wm)(ei,{data:(0,i.SU)(c)},null,8,["data"])]),_:1},8,["title"])]),(0,i._)("div",ec,[(0,i.Wm)(ed,{bounce:(0,i.SU)(v),click:(0,i.SU)(p),open:(0,i.SU)(m)},null,8,["bounce","click","open"])])])}}}),ep=(0,U.default)(ev,[["__scopeId","data-v-ad5eb2d2"]])}}]);