"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["966"],{8302:function(e,t,l){l.r(t),l.d(t,{default:()=>ec});var a=l(9454),n=l(2403),i=l(6419),o=l(209),d=l(3447),s=l(9506),r=l(825),u=l(3312),m=l(6949),c=l(55);let p={class:"bt-tips flex flex-col gap-4px list-outside list-disc leading-20px text-[#777]"};var _=l(4222);let f=(0,_.default)({},[["render",function(e,t){return(0,o.wg)(),(0,o.iD)("ul",p,[(0,o.WI)(e.$slots,"default",{},void 0,!0)])}],["__scopeId","data-v-8731a1b4"]]);var v=l(5523),w=l(5891),U=l(4603),S=l(6883),y=l(6988),x=l(5778);let b={class:"pt-20px"},k={class:"w-320px"},h={class:"w-100px ml-20px"},W=(0,o.aZ)({__name:"DomainForm",setup(e){let{t}=(0,x.QT)(),l=(0,o.iH)(!1),a=(0,o.Fl)(()=>l.value?t("domain.form.editTitle"):t("domain.form.addTitle")),n=(0,o.AE)("formRef"),i=(0,o.qj)({domain:"",a_record:"",quota:5,quota_unit:"GB",mailboxes:50,email:""}),d=[{label:"GB",value:"GB"},{label:"MB",value:"MB"}],s={domain:{trigger:["blur","input"],validator:()=>""!==i.domain.trim()||Error(t("domain.form.validation.domainRequired"))}},m=(e,t)=>{switch(t){case"GB":return 0x40000000*e;case"MB":return 1048576*e;default:return e}},[p,_]=(0,u.d)({onChangeState:e=>{if(e){let e=_.getState();if(l.value=e.isEdit,e.row){let{row:t}=e;i.domain=t.domain,i.a_record=t.a_record;let l=(0,r.UO)(t.quota);i.quota=(0,r.Dx)(l.split(" ")[0]),i.quota_unit=l.split(" ")[1],i.mailboxes=t.mailboxes}}else i.domain="",i.a_record="",i.quota=5,i.quota_unit="GB",i.mailboxes=50},onConfirm:async()=>{var e;await (null===(e=n.value)||void 0===e?void 0:e.validate()),l.value?await (0,c.gK)({domain:i.domain,quota:m(i.quota,i.quota_unit),mailboxes:i.mailboxes}):await (0,c.Fj)({domain:i.domain,quota:m(i.quota,i.quota_unit),mailboxes:i.mailboxes}),_.getState().refresh()}});return(e,r)=>{let u=y.Z,m=S.ZP,c=U.Z,_=w.Z,f=v.Z;return(0,o.wg)(),(0,o.j4)((0,o.SU)(p),{title:(0,o.SU)(a),width:580},{default:(0,o.w5)(()=>[(0,o._)("div",b,[(0,o.Wm)(f,{ref_key:"formRef",ref:n,model:(0,o.SU)(i),rules:s},{default:(0,o.w5)(()=>[(0,o.Wm)(m,{label:(0,o.SU)(t)("domain.form.domain"),path:"domain"},{default:(0,o.w5)(()=>[(0,o._)("div",k,[(0,o.Wm)(u,{value:(0,o.SU)(i).domain,"onUpdate:value":r[0]||(r[0]=e=>(0,o.SU)(i).domain=e),disabled:(0,o.SU)(l),placeholder:(0,o.SU)(t)("domain.form.domainPlaceholder")},null,8,["value","disabled","placeholder"])])]),_:1},8,["label"]),(0,o.kq)("",!0),(0,o.Wm)(m,{label:(0,o.SU)(t)("domain.form.quota")},{default:(0,o.w5)(()=>[(0,o.Wm)(c,{value:(0,o.SU)(i).quota,"onUpdate:value":r[2]||(r[2]=e=>(0,o.SU)(i).quota=e),class:"w-200px",min:0,"show-button":!1},null,8,["value"]),(0,o._)("div",h,[(0,o.Wm)(_,{value:(0,o.SU)(i).quota_unit,"onUpdate:value":r[3]||(r[3]=e=>(0,o.SU)(i).quota_unit=e),options:d},null,8,["value"])])]),_:1},8,["label"]),(0,o.Wm)(m,{label:(0,o.SU)(t)("domain.form.mailboxCount")},{default:(0,o.w5)(()=>[(0,o.Wm)(c,{value:(0,o.SU)(i).mailboxes,"onUpdate:value":r[4]||(r[4]=e=>(0,o.SU)(i).mailboxes=e),class:"w-320px",min:0,"show-button":!1},null,8,["value"])]),_:1},8,["label"]),(0,o.kq)("",!0)]),_:1},8,["model"]),(0,o.kq)("",!0)])]),_:1},8,["title"])}}});var g=l(4671);let z=(0,o.aZ)({__name:"index",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){let t=(0,o.tT)(e,"value");return(e,l)=>{let a=g.Z;return(0,o.wg)(),(0,o.j4)(a,{value:t.value,"onUpdate:value":l[0]||(l[0]=e=>t.value=e),class:"bt-tabs h-full",type:"card",placement:"top"},{default:(0,o.w5)(()=>[(0,o.WI)(e.$slots,"default")]),_:3},8,["value"])}}}),q=(0,_.default)(z,[["__scopeId","data-v-aa8a5942"]]);var Z=l(6720),C=l(4352),j=l(3236);let P={class:"ssl-cert-container"},T={class:"brand-info"},$={class:"info-label"},F={class:"info-value"},D={class:"info-label"},M={class:"info-value font-normal!"},R={class:"cert-content"},B={class:"cert-section"},H={class:"section-title"},I={class:"cert-section"},O={class:"section-title"},E={class:"cert-actions"},G=(0,o.aZ)({__name:"OtherCert",props:{domain:{type:Object,required:!0},refresh:{type:Function,required:!0}},setup(e){let t=(0,o.iH)({subject:"",issuer:"",not_before:"",not_after:"",dns:[],endtime:0,key_pem:"",cert_pem:""}),l=(0,o.Fl)(()=>t.value.dns||[]),a=async()=>{let l=await (0,c.Au)({domain:e.domain.domain});(0,r.Kn)(l)&&(t.value=l)},n=async()=>{await (0,c.OV)({domain:e.domain.domain,key:t.value.key_pem,certificate:t.value.cert_pem}),a(),e.refresh()},i=async()=>{await (0,c.yW)({domain:e.domain.domain}),a(),e.refresh()};return t.value=e.domain.cert_info,(e,a)=>{let s=j.ZP,r=C.Z,u=y.Z,m=d.ZP;return(0,o.wg)(),(0,o.iD)("div",P,[(0,o.SU)(t).endtime>0?((0,o.wg)(),(0,o.j4)(r,{key:0,class:"mb-16px",type:"success","show-icon":!1},{default:(0,o.w5)(()=>[(0,o._)("div",T,[(0,o._)("div",$,(0,o.zw)(e.$t("domain.ssl.cert.brand"))+"：",1),(0,o._)("div",F,(0,o.zw)((0,o.SU)(t).issuer),1),(0,o._)("div",D,(0,o.zw)(e.$t("domain.ssl.cert.domains"))+"：",1),(0,o._)("div",M,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,o.SU)(l),(e,t)=>((0,o.wg)(),(0,o.j4)(s,{key:t,size:"small"},{default:(0,o.w5)(()=>[(0,o.Uk)((0,o.zw)(e),1)]),_:2},1024))),128))])])]),_:1})):(0,o.kq)("",!0),(0,o._)("div",R,[(0,o._)("div",B,[(0,o._)("div",H,(0,o.zw)(e.$t("domain.ssl.cert.privateKey")),1),(0,o.Wm)(u,{value:(0,o.SU)(t).key_pem,"onUpdate:value":a[0]||(a[0]=e=>(0,o.SU)(t).key_pem=e),type:"textarea",placeholder:e.$t("domain.ssl.cert.keyPlaceholder"),rows:14,"input-props":{spellcheck:!1}},null,8,["value","placeholder"])]),(0,o._)("div",I,[(0,o._)("div",O,(0,o.zw)(e.$t("domain.ssl.cert.certificate")),1),(0,o.Wm)(u,{value:(0,o.SU)(t).cert_pem,"onUpdate:value":a[1]||(a[1]=e=>(0,o.SU)(t).cert_pem=e),type:"textarea",placeholder:e.$t("domain.ssl.cert.certPlaceholder"),"input-props":{spellcheck:!1},rows:14},null,8,["value","placeholder"])])]),(0,o._)("div",E,[(0,o.Wm)(m,{type:"primary",onClick:n},{default:(0,o.w5)(()=>[(0,o.Uk)((0,o.zw)(e.$t("common.actions.save")),1)]),_:1}),(0,o.Wm)(m,{type:"primary",onClick:i},{default:(0,o.w5)(()=>[(0,o.Uk)((0,o.zw)(e.$t("domain.ssl.actions.applyFree")),1)]),_:1})]),(0,o.Wm)(f,null,{default:(0,o.w5)(()=>[(0,o._)("li",null,(0,o.zw)(e.$t("domain.ssl.tips.paste")),1),(0,o._)("li",null,(0,o.zw)(e.$t("domain.ssl.tips.chainCheck")),1),(0,o._)("li",null,(0,o.zw)(e.$t("domain.ssl.tips.pemFormat")),1),(0,o._)("li",null,(0,o.zw)(e.$t("domain.ssl.tips.defaultSite")),1)]),_:1})])}}}),A=(0,_.default)(G,[["__scopeId","data-v-135cc8b2"]]),K=(0,o.aZ)({__name:"index",setup(e){let t=(0,o.iH)("other"),l=(0,o.iH)(null),[a,n]=(0,u.d)({onChangeState:e=>{if(e){let{row:e}=n.getState();e&&(l.value=e)}}}),i=()=>{n.getState().refresh()};return(e,n)=>{let d=Z.Z;return(0,o.wg)(),(0,o.j4)((0,o.SU)(a),{title:e.$t("domain.ssl.title"),width:650,footer:!1},{default:(0,o.w5)(()=>[(0,o.Wm)(q,{value:(0,o.SU)(t),"onUpdate:value":n[0]||(n[0]=e=>(0,o.dq)(t)?t.value=e:null)},{default:(0,o.w5)(()=>[(0,o.Wm)(d,{name:"other",tab:e.$t("domain.ssl.tabs.otherCertificate")},{default:(0,o.w5)(()=>[(0,o.SU)(l)?((0,o.wg)(),(0,o.j4)(A,{key:0,domain:(0,o.SU)(l),refresh:i},null,8,["domain"])):(0,o.kq)("",!0)]),_:1},8,["tab"])]),_:1},8,["value"])]),_:1},8,["title"])}}});var X=l(5476),L=l(5191),Q=l(5962),V=l(6499),Y=l(6775),J=l(3776);let N={class:"record-title"},ee={class:"record-desc"},et={class:"record-title"},el={class:"record-desc"},ea={class:"record-title"},en={class:"record-desc"},ei={class:"record-desc"},eo=(0,o.aZ)({__name:"DomainDns",setup(e){let{t}=(0,x.QT)(),{copyText:l}=(0,J.F)(),a=(0,o.iH)([]),n=e=>a.value.length>0?a.value[0].dns_records[e].value:"",s=(0,o.Fl)(()=>n("dkim")),r=(0,o.Fl)(()=>n("mx")),m=(0,o.Fl)(()=>n("dmarc")),c=(0,o.Fl)(()=>"v=spf1 +a +mx -all"),p=e=>{let{status:l}=e;return(0,o.Wm)("div",{class:["inline-flex items-center",l?"text-primary":"text-error"]},[(0,o.Wm)(Q.g,{size:"16"},{default:()=>[l?(0,o.Wm)(V.Z,null,null):(0,o.Wm)(Y.Z,null,null)]}),(0,o.Wm)("span",{class:"ml-4px"},[l?t("domain.dns.status.ok"):t("domain.dns.status.notSet")])])},_=(0,o.iH)([{key:"domain",title:t("domain.dns.columns.domain"),width:"20%",ellipsis:{tooltip:!0}},{key:"mx",title:"MX",render:e=>{let t=e.dns_records.mx;return(0,o.Wm)(p,{status:(null==t?void 0:t.valid)||!1},null)}},{key:"a",title:"A record",render:e=>{let t=e.dns_records.a;return(0,o.Wm)(p,{status:(null==t?void 0:t.valid)||!1},null)}},{key:"spf",title:"SPF",render:e=>{let t=e.dns_records.spf;return(0,o.Wm)(p,{status:(null==t?void 0:t.valid)||!1},null)}},{key:"dkim",title:"DKIM",render:e=>{let t=e.dns_records.dkim;return(0,o.Wm)(p,{status:(null==t?void 0:t.valid)||!1},null)}},{key:"dmarc",title:"DMARC",render:e=>{let t=e.dns_records.dmarc;return(0,o.Wm)(p,{status:(null==t?void 0:t.valid)||!1},null)}},{key:"ptr",title:"PTR",render:e=>{let t=e.dns_records.ptr;return(0,o.Wm)(p,{status:(null==t?void 0:t.valid)||!1},null)}}]),[f,v]=(0,u.d)({onChangeState:e=>{if(e){let{row:e}=v.getState();e&&(a.value=[e])}}});return(e,n)=>{let u=i.Z,p=L.Z,v=X.ZP,w=d.ZP;return(0,o.wg)(),(0,o.j4)((0,o.SU)(f),{title:(0,o.SU)(t)("domain.dns.title"),width:750,footer:!1},{default:(0,o.w5)(()=>[(0,o._)("div",null,[(0,o.Wm)(u,{class:"mb-20px",data:(0,o.SU)(a),columns:(0,o.SU)(_)},null,8,["data","columns"]),(0,o._)("div",N,(0,o.zw)((0,o.SU)(t)("domain.dns.step1.title")),1),(0,o._)("div",ee,(0,o.zw)((0,o.SU)(t)("domain.dns.step1.description")),1),(0,o.Wm)(p,{class:"mb-30px"},{default:(0,o.w5)(()=>[(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,(0,o.zw)((0,o.SU)(t)("domain.dns.table.recordType")),1),(0,o._)("th",null,(0,o.zw)((0,o.SU)(t)("domain.dns.table.host")),1),(0,o._)("th",null,(0,o.zw)((0,o.SU)(t)("domain.dns.table.value")),1),(0,o._)("th",null,(0,o.zw)((0,o.SU)(t)("domain.dns.table.mxPriority")),1)])]),(0,o._)("tbody",null,[(0,o._)("tr",null,[n[3]||(n[3]=(0,o._)("td",null,"MX",-1)),n[4]||(n[4]=(0,o._)("td",null,"@",-1)),(0,o._)("td",null,(0,o.zw)((0,o.SU)(r)),1),n[5]||(n[5]=(0,o._)("td",null,"10",-1))])])]),_:1}),(0,o._)("div",et,(0,o.zw)((0,o.SU)(t)("domain.dns.step2.title")),1),(0,o._)("div",el,(0,o.zw)((0,o.SU)(t)("domain.dns.step2.description")),1),(0,o.Wm)(p,{class:"mb-30px"},{default:(0,o.w5)(()=>[(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,(0,o.zw)((0,o.SU)(t)("domain.dns.table.recordType")),1),(0,o._)("th",null,(0,o.zw)((0,o.SU)(t)("domain.dns.table.host")),1),(0,o._)("th",null,(0,o.zw)((0,o.SU)(t)("domain.dns.table.value")),1)])]),(0,o._)("tbody",null,[(0,o._)("tr",null,[n[6]||(n[6]=(0,o._)("td",null,"TXT",-1)),n[7]||(n[7]=(0,o._)("td",null,"@",-1)),(0,o._)("td",null,[(0,o.Wm)(v,{class:"mr-4px max-w-360px!"},{default:(0,o.w5)(()=>[(0,o.Uk)((0,o.zw)((0,o.SU)(c)),1)]),_:1}),(0,o.Wm)(w,{text:"",type:"primary",onClick:n[0]||(n[0]=()=>(0,o.SU)(l)((0,o.SU)(c)))},{default:(0,o.w5)(()=>[(0,o.Uk)((0,o.zw)((0,o.SU)(t)("common.actions.copy")),1)]),_:1})])]),(0,o._)("tr",null,[n[8]||(n[8]=(0,o._)("td",null,"TXT",-1)),n[9]||(n[9]=(0,o._)("td",null,"default._domainkey",-1)),(0,o._)("td",null,[(0,o.Wm)(v,{class:"mr-4px max-w-360px!"},{default:(0,o.w5)(()=>[(0,o.Uk)((0,o.zw)((0,o.SU)(s)||"--"),1)]),_:1}),(0,o.SU)(s)?((0,o.wg)(),(0,o.j4)(w,{key:0,text:"",type:"primary",onClick:n[1]||(n[1]=()=>(0,o.SU)(l)((0,o.SU)(s)))},{default:(0,o.w5)(()=>[(0,o.Uk)((0,o.zw)((0,o.SU)(t)("common.actions.copy")),1)]),_:1})):(0,o.kq)("",!0)])]),(0,o._)("tr",null,[n[10]||(n[10]=(0,o._)("td",null,"TXT",-1)),n[11]||(n[11]=(0,o._)("td",null,"_dmarc",-1)),(0,o._)("td",null,[(0,o.Wm)(v,{class:"mr-4px max-w-360px!"},{default:(0,o.w5)(()=>[(0,o.Uk)((0,o.zw)((0,o.SU)(m)),1)]),_:1}),(0,o.SU)(m)?((0,o.wg)(),(0,o.j4)(w,{key:0,text:"",type:"primary",onClick:n[2]||(n[2]=()=>(0,o.SU)(l)((0,o.SU)(m)))},{default:(0,o.w5)(()=>[(0,o.Uk)((0,o.zw)((0,o.SU)(t)("common.actions.copy")),1)]),_:1})):(0,o.kq)("",!0)])])])]),_:1}),(0,o._)("div",ea,(0,o.zw)((0,o.SU)(t)("domain.dns.step3.title")),1),(0,o._)("div",en,(0,o.zw)((0,o.SU)(t)("domain.dns.step3.description1")),1),(0,o._)("div",ei,(0,o.zw)((0,o.SU)(t)("domain.dns.step3.description2")),1)])]),_:1},8,["title"])}}}),ed=(0,_.default)(eo,[["__scopeId","data-v-729e3aa2"]]),es={class:"p-24px"},er={class:"mb-20px text-24px font-bold"};function eu(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,o.lA)(e)}let em=(0,o.aZ)({__name:"index",setup(e){let{t}=(0,x.QT)(),{tableParams:l,tableList:p,loading:_,tableTotal:f,getTableData:v}=(0,m.Z)({immediate:!0,params:{page:1,page_size:10,keyword:""},fetchFn:c.i7}),w=(0,o.iH)([{key:"domain",title:t("domain.columns.domain"),minWidth:130,ellipsis:{tooltip:!0}},{key:"quota",title:t("domain.columns.quota"),render:e=>(0,r.UO)(e.quota)},{key:"mailboxes",title:t("domain.columns.mailboxes")},{key:"mailbox_quota",title:t("domain.columns.defaultMailboxSize"),render:e=>(0,r.UO)(e.mailbox_quota)},{key:"ssl",title:"SSL",render:e=>{let l;if(e.cert_info&&e.cert_info.endtime){let l=Math.floor((1e3*e.cert_info.endtime-Date.now())/1e3/60/60/24);return(0,o.Wm)(d.ZP,{type:l<0?"error":"primary",text:!0,onClick:()=>{h(e)}},{default:()=>[l<0?t("domain.ssl.expired"):t("domain.ssl.daysLeft",{days:l})]})}return(0,o.Wm)(d.ZP,{type:"warning",text:!0,onClick:()=>{h(e)}},eu(l=t("domain.ssl.notSet"))?l:{default:()=>[l]})}},{title:t("domain.columns.actions"),key:"actions",align:"right",render:e=>{let l,a,n;return(0,o.Wm)(s.Z,{inline:!0},{default:()=>[(0,o.Wm)(d.ZP,{type:"primary",text:!0,onClick:()=>{q(e)}},eu(l=t("domain.actions.dnsRecord"))?l:{default:()=>[l]}),(0,o.Wm)(d.ZP,{type:"primary",text:!0,onClick:()=>{Z(e)}},eu(a=t("common.actions.edit"))?a:{default:()=>[a]}),(0,o.Wm)(d.ZP,{type:"error",text:!0,onClick:()=>{C(e)}},eu(n=t("common.actions.delete"))?n:{default:()=>[n]})]})}}]),[U,S]=(0,u.d)({component:W,state:{isEdit:!1,refresh:v}}),y=()=>{S.setState({row:null,isEdit:!1}),S.open()},[b,k]=(0,u.d)({component:K,state:{refresh:v}}),h=e=>{k.setState({row:e}),k.open()},[g,z]=(0,u.d)({component:ed,state:{}}),q=e=>{z.setState({row:e}),z.open()},Z=e=>{S.setState({row:e,isEdit:!0}),S.open()},C=e=>{(0,r.iG)({title:t("domain.delete.title"),content:t("domain.delete.confirm",{domain:e.domain}),confirmText:t("common.actions.delete"),confirmType:"error",onConfirm:async()=>{await (0,c.dj)({domain:e.domain}),v()}})};return(e,s)=>{let r=i.Z,u=n.Z,m=a.Z;return(0,o.wg)(),(0,o.iD)("div",es,[(0,o._)("div",er,(0,o.zw)((0,o.SU)(t)("domain.title")),1),(0,o.Wm)(m,null,{toolsLeft:(0,o.w5)(()=>[(0,o.Wm)((0,o.SU)(d.ZP),{type:"primary",onClick:y},{default:(0,o.w5)(()=>[(0,o.Uk)((0,o.zw)((0,o.SU)(t)("domain.addDomain")),1)]),_:1})]),table:(0,o.w5)(()=>[(0,o.Wm)(r,{loading:(0,o.SU)(_),columns:(0,o.SU)(w),data:(0,o.SU)(p)},null,8,["loading","columns","data"])]),pageRight:(0,o.w5)(()=>[(0,o.Wm)(u,{page:(0,o.SU)(l).page,"onUpdate:page":s[0]||(s[0]=e=>(0,o.SU)(l).page=e),"page-size":(0,o.SU)(l).page_size,"onUpdate:pageSize":s[1]||(s[1]=e=>(0,o.SU)(l).page_size=e),"item-count":(0,o.SU)(f),onRefresh:(0,o.SU)(v)},null,8,["page","page-size","item-count","onRefresh"])]),modal:(0,o.w5)(()=>[(0,o.Wm)((0,o.SU)(U)),(0,o.Wm)((0,o.SU)(b)),(0,o.Wm)((0,o.SU)(g))]),_:1})])}}}),ec=(0,_.default)(em,[["__scopeId","data-v-45b381f0"]])}}]);